package org.ethereum;

import org.ethereum.cli.CLIInterface;
import org.ethereum.config.SystemProperties;
import org.ethereum.core.Block;
import org.ethereum.core.BlockchainImpl;
import org.ethereum.core.ImportResult;
import org.ethereum.facade.Ethereum;
import org.ethereum.facade.EthereumFactory;
import org.spongycastle.util.encoders.Hex;

import java.io.IOException;
import java.net.URISyntaxException;

/**
 * @author Roman Mandeleil
 * @since 14.11.2014
 */
public class Start {

    public static void main(String args[]) throws IOException, URISyntaxException {
        CLIInterface.call(args);

        if (!SystemProperties.getDefault().blocksLoader().equals("")) {
            SystemProperties.getDefault().setSyncEnabled(false);
            SystemProperties.getDefault().setDiscoveryEnabled(false);
        }

        Ethereum ethereum = EthereumFactory.createEthereum();

//        ethereum.exitOn(2287674);

//        while(Boolean.TRUE) {
//            long s = System.nanoTime();
//            ImportResult result = ((BlockchainImpl) ethereum.getBlockchain()).tryToConnect(new Block(Hex.decode("f90683f9020fa059d12eedca9ca310c5dabf44a6f2fde19d0f1012ead4427bf022b37353197583a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479461c808d82a3ac53231750dadc13c777b59310bd9a05f62eaa85a159d1fb206fd6eb2b7f7f89e0997b4788454cb3123073d44769ecba0504b87926ece2cbc3d17e830cf1afb76009b81ec3947ef7d35d4997e6b2f6de2a06f25538d7893bf448af7aefff77508c3733769c3954ac9d974f1d04e033abb63b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000863b00c46f54e98322e83a8347b760832b329a8457dfd0448fe4b883e5bda9e7a59ee4bb99e9b1bca0138522e5101ef4ac5e5d5e9928208cd5b1da1ffd2fa996eba0bc1e360126a119884d64d9635929210ef9046df865028504a817c8008347b76094365a4c5907ab36e26335fdc41c7f493622bb9ce180801ca0822ad1ed219e041179b159d5f59989cbf3dbd122a3f3208035c02398ee51ed68a0377b135a1bd37171dd0a7654b7f05bbe7221faa4c17a0b9d4637fb153ad5aae7f87083144a9d8504a817c80083015f90947da800af792385b58a24f47ab7678ea87aff1f328801c8e59a3d866000801ca0916cef84ff94251d4b512f7a7ff7c995d11fe7f17243b250330fdd48700a9135a0601677f5e5cf04ab92746014b3c8b99ced84a0a1e978d7a7828b5b5e59ef4ac4f8ab82069b850430e2340082afc8944bf980c02f0abbcd2acfdaa8a9b4a8b45f66e1bd80b8442e33f4e031326c3335323030000000000000000000000000000000000000000000000000e0536faa6cbd289f8cd631a2859ff7a1e39bcb25bdbf23bd7ae03a5d0971bad31ca07c6434a0e285874a33a2507d4cba71be84be54a940a3679539bee917d8c73670a018dd5519c83aa38a93ee7e84b4e821a2616e8aa2342dda09b9956cc625b6418df87083144a9e8504a817c80083015f9094a916363aea1a65915267b50a502f388a63df189a8801c8182a745cf000801ca06b6fb1b6f9c1da83131aea16d76113da89b9599e08cd18ea1e87d37c500ea67da0282c53e8bdbc06108e60b59a660094d4c9c05d91fac8e19320f5b57d46928929f8ab82069c850430e2340082afc8944bf980c02f0abbcd2acfdaa8a9b4a8b45f66e1bd80b8442e33f4e0316c33353330300000000000000000000000000000000000000000000000000019bc4f149d7469c1370f724307a89017dc3bc2f6ca9bf8e68aad2c7528f39e821ca024c92e660fe5dd8539ccede8995587ac03b938b82d980949e219f5aa644711b5a05afa52fe818904414cb700736f584da90302079b11d101f81e35dcb17fa5c860f87083144a9f8504a817c80083015f90949deb01dc90a92288071cd938b8037032bc8b3ac78801c8148975d49400801ca0f85c7356066aa3727e8242b636cee95bc1321fb070e8ee058165c1a012841890a020beaa45c5f372e68a3da2fe504b2340f8e4195a5a50606cd97e774d6311b6e2f87083144aa08504a817c80083015f909454e4f77938257c1d4f4c24982f79d19a80fe48ab8801c2e26b4cf07400801ca0aae29c12f3933133e03648952af9c53e313737b269423611240cfc11dbd01937a05e54d895b6a97494b3ecfc0cf6a42f037a88b03d451cc287c8a5c210f77b1a7bf87083144aa18504a817c80083015f9094f32d0d920292d6ae59829c00fc1afdff73ae83038801c030983e043800801ca0f25864c8ad06d2b2632e03e3d5a41446ab79807411f7b03c89995fa0a7d25beaa02846682b63030f4fef97c87b944a7cbea669320c9c6d6531415b73b5af921d08f87083144aa28504a817c80083015f909429cb7c5f534730656c495a50fc4caa0969b6d6a58801bf299646d72000801ba0054a66357eb76cae7048272d25890292e1527f3f6a15f0b3cbe7ee15ac37f642a057636d0a5d276dfc955b5218bf8f031e269f2a01d778deac3ab6eaccf4267f49c0")));
//            System.err.println("Result: " + result + " in " + (System.nanoTime() - s) / 1_000_000 + " ms");
//        }

        if (!SystemProperties.getDefault().blocksLoader().equals(""))
            ethereum.getBlockLoader().loadBlocks();
    }

}
